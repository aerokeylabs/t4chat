// todo: cancel generating message by sending kill signal if thread exists in state.active_threads
